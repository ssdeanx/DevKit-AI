<!DOCTYPE html>
<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DevKit AI Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          container: {
            center: true,
            padding: "2rem",
            screens: {
              "2xl": "1400px",
            },
          },
          extend: {
            colors: {
              border: "hsl(var(--border))",
              input: "hsl(var(--input))",
              ring: "hsl(var(--ring))",
              background: "hsl(var(--background))",
              foreground: "hsl(var(--foreground))",
              primary: {
                DEFAULT: "hsl(var(--primary))",
                foreground: "hsl(var(--primary-foreground))",
              },
              secondary: {
                DEFAULT: "hsl(var(--secondary))",
                foreground: "hsl(var(--secondary-foreground))",
              },
              destructive: {
                DEFAULT: "hsl(var(--destructive))",
                foreground: "hsl(var(--destructive-foreground))",
              },
              muted: {
                DEFAULT: "hsl(var(--muted))",
                foreground: "hsl(var(--muted-foreground))",
              },
              accent: {
                DEFAULT: "hsl(var(--accent))",
                foreground: "hsl(var(--accent-foreground))",
              },
              popover: {
                DEFAULT: "hsl(var(--popover))",
                foreground: "hsl(var(--popover-foreground))",
              },
              card: {
                DEFAULT: "hsl(var(--card))",
                foreground: "hsl(var(--card-foreground))",
              },
               success: "hsl(var(--success))",
               purple: "hsl(var(--purple))",
               warning: "hsl(var(--warning))",
            },
            borderRadius: {
              lg: "var(--radius)",
              md: "calc(var(--radius) - 2px)",
              sm: "calc(var(--radius) - 4px)",
            },
            keyframes: {
              "accordion-down": {
                from: { height: "0" },
                to: { height: "var(--radix-accordion-content-height)" },
              },
              "accordion-up": {
                from: { height: "var(--radix-accordion-content-height)" },
                to: { height: "0" },
              },
              "blink": {
                "0%, 100%": { opacity: 1 },
                "50%": { opacity: 0 },
              },
              "fade-in": {
                from: { opacity: '0' },
                to: { opacity: '1' },
              },
               "fade-in-scale": {
                from: { opacity: '0', transform: 'scale(0.95)' },
                to: { opacity: '1', transform: 'scale(1)' },
              },
              "slide-up": {
                from: { transform: 'translateY(10px)' },
                to: { transform: 'translateY(0)' },
              },
               "aurora-bg": {
                '0%': { transform: 'translate(var(--aurora-start-x), var(--aurora-start-y)) scale(1)' },
                '50%': { transform: 'translate(var(--aurora-mid-x), var(--aurora-mid-y)) scale(1.2)' },
                '100%': { transform: 'translate(var(--aurora-end-x), var(--aurora-end-y)) scale(1)' },
               },
               "meteor": {
                '0%': { transform: 'translate(50vw, -50vh) rotate(215deg)', opacity: '1' },
                '70%': { opacity: '1' },
                '100%': { transform: 'translate(-50vw, 50vh) rotate(215deg)', opacity: '0' },
               },
               "text-gradient": {
                  to: { backgroundPosition: "200% center" },
               },
               "pulse-dot": {
                '0%, 100%': { transform: 'scale(1)', opacity: '0.5' },
                '50%': { transform: 'scale(1.2)', opacity: '1' },
               },
               "glow": {
                "0%, 100%": { "box-shadow": "0 0 5px hsl(var(--primary) / 0.5)" },
                "50%": { "box-shadow": "0 0 20px hsl(var(--primary) / 0.7)" }
               },
                "fill-width": {
                    from: { width: "0%" },
                    to: { width: "100%" }
                },
                "toast-hide": {
                    "0%": { opacity: "1" },
                    "100%": { opacity: "0" },
                },
                "toast-slide-in-right": {
                    "0%": { transform: `translateX(calc(100% + 1rem))` },
                    "100%": { transform: "translateX(0)" },
                },
            },
            animation: {
              "accordion-down": "accordion-down 0.2s ease-out",
              "accordion-up": "accordion-up 0.2s ease-out",
              "blink": "blink 1s step-end infinite",
              "fade-in": "fade-in 0.5s ease-out forwards",
              "slide-up": "slide-up 0.5s ease-out forwards",
              "aurora-bg": "aurora-bg 60s infinite alternate linear",
              "meteor": "meteor 5s linear infinite",
              "text-gradient": "text-gradient 8s linear infinite",
              "pulse-dot": "pulse-dot 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite",
              "fade-in-scale": "fade-in-scale 0.2s ease-out forwards",
              "glow": "glow 2s ease-in-out infinite",
              "fill-width": "fill-width 0.5s ease-in-out forwards",
              "toast-hide": "toast-hide 100ms ease-in forwards",
              "toast-slide-in-right": "toast-slide-in-right 150ms cubic-bezier(0.16, 1, 0.3, 1)",
            },
          },
        },
      }
    </script>
    <style type="text/tailwindcss">
      @layer base {
        :root {
          --background: 240 10% 3.9%;
          --foreground: 0 0% 98%;
          --card: 240 10% 3.9%;
          --card-foreground: 0 0% 98%;
          --popover: 240 10% 3.9%;
          --popover-foreground: 0 0% 98%;
          --primary: 0 0% 98%;
          --primary-foreground: 240 5.9% 10%;
          --secondary: 240 3.7% 15.9%;
          --secondary-foreground: 0 0% 98%;
          --muted: 240 3.7% 15.9%;
          --muted-foreground: 240 5% 64.9%;
          --accent: 240 3.7% 15.9%;
          --accent-foreground: 0 0% 98%;
          --destructive: 0 62.8% 30.6%;
          --destructive-foreground: 0 0% 98%;
          --border: 240 3.7% 15.9%;
          --input: 240 3.7% 15.9%;
          --ring: 240 4.9% 83.9%;
          --radius: 0.75rem;
          --success: 142.1 70.2% 46.3%;
          --purple: 291.2 70.8% 60.8%;
          --warning: 47.9 90.8% 63.1%;
        }
 
        .dark {
          --background: 240 10% 3.9%;
          --foreground: 0 0% 98%;
          --card: 240 10% 3.9%;
          --card-foreground: 0 0% 98%;
          --popover: 240 10% 3.9%;
          --popover-foreground: 0 0% 98%;
          --primary: 0 0% 98%;
          --primary-foreground: 240 5.9% 10%;
          --secondary: 240 3.7% 15.9%;
          --secondary-foreground: 0 0% 98%;
          --muted: 240 3.7% 15.9%;
          --muted-foreground: 240 5% 64.9%;
          --accent: 240 3.7% 15.9%;
          --accent-foreground: 0 0% 98%;
          --destructive: 0 62.8% 30.6%;
          --destructive-foreground: 0 0% 98%;
          --border: 240 3.7% 15.9%;
          --input: 240 3.7% 15.9%;
          --ring: 240 4.9% 83.9%;
          --success: 142.1 70.2% 46.3%;
          --purple: 291.2 70.8% 60.8%;
          --warning: 47.9 90.8% 63.1%;
        }
      }
       @layer base {
        * {
          @apply border-border;
        }
        body {
          @apply bg-background text-foreground;
          font-family: Inter, system-ui, Avenir, Helvetica, Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }
        .background-grid {
          background-image:
            linear-gradient(to right, hsl(var(--border) / 0.4) 1px, transparent 1px),
            linear-gradient(to bottom, hsl(var(--border) / 0.4) 1px, transparent 1px);
          background-size: 36px 36px;
        }
      }
      @layer components {
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: hsl(var(--secondary) / 0.5);
            border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: hsl(var(--muted-foreground));
            border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: hsl(var(--foreground));
        }

        .view-header {
            @apply p-6 relative;
        }
        .view-header::after {
            content: '';
            @apply absolute bottom-0 left-0 w-full h-px;
            background: linear-gradient(90deg, hsl(var(--border)) 0%, hsl(var(--border)) 50%, transparent 100%);
        }
        .dark .view-header::after {
             background: linear-gradient(90deg, hsl(var(--border)) 0%, hsl(var(--border)) 50%, transparent 100%);
        }

        .thoughts-terminal {
          @apply bg-black font-mono text-green-400 border-green-700;
        }
        .thoughts-blueprint {
            @apply bg-blue-900/50 border-blue-400/20 text-blue-200;
            background-image:
                linear-gradient(to right, hsl(var(--accent-foreground) / 0.1) 1px, transparent 1px),
                linear-gradient(to bottom, hsl(var(--accent-foreground) / 0.1) 1px, transparent 1px);
            background-size: 20px 20px;
        }
        .thoughts-handwritten {
            @apply bg-[#FDFBF7] border-[#D3C4A3] p-4 rounded-lg text-stone-800 dark:bg-stone-900 dark:border-stone-700 dark:text-stone-300;
            font-family: 'Comic Sans MS', 'Chalkboard SE', 'Marker Felt', sans-serif;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.1);
            background-image: linear-gradient(90deg, #EAE3D6 1px, transparent 1px), linear-gradient(#EAE3D6 1px, transparent 1px);
            background-size: 20px 20px;
            line-height: 1.8;
        }
        .dark .thoughts-handwritten {
             background-image: linear-gradient(90deg, theme('colors.stone.800') 1px, transparent 1px), linear-gradient(theme('colors.stone.800') 1px, transparent 1px);
        }
        .thoughts-code-comment {
            @apply bg-muted font-mono border-border p-4 rounded-lg text-muted-foreground;
        }
        .thoughts-code-comment-content::before {
            content: '/*';
            @apply block text-muted-foreground/50;
        }
        .thoughts-code-comment-content::after {
            content: '*/';
            @apply block text-muted-foreground/50;
        }
        .thoughts-matrix {
            @apply bg-black font-mono border-green-700 p-4 rounded-lg text-green-400;
            text-shadow: 0 0 5px #0f0;
        }
        .thoughts-scroll {
            @apply bg-[#F4E9D8] border-[#BFA98D] text-[#5C4033] p-6 rounded-lg dark:bg-[#2a211c] dark:border-[#5c4a3d] dark:text-[#d4c3b4];
            font-family: 'Georgia', 'Times New Roman', serif;
            background: linear-gradient(to bottom, #F4E9D8, #EADBC8);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2), inset 0 0 15px rgba(0,0,0,0.1);
            border-radius: 2px;
        }
        .dark .thoughts-scroll {
             background: linear-gradient(to bottom, #2a211c, #1f1915);
        }
        .typing-cursor::after {
          content: '▋';
          @apply ml-1 animate-blink;
        }
        .animate-in {
            animation: fade-in forwards, slide-up forwards;
            animation-duration: 0.3s;
            animation-timing-function: ease-out;
        }
        
        /* Workflow Visualizer */
        .workflow-node {
            @apply relative flex items-center p-3 rounded-lg border-2 bg-secondary transition-all duration-300;
        }
        .workflow-node.pending {
            @apply border-border opacity-60;
        }
        .workflow-node.in-progress {
            @apply border-primary animate-pulse shadow-lg;
        }
        .workflow-node.completed {
            @apply border-green-500 bg-green-500/10;
        }
        .workflow-connector {
            @apply absolute left-1/2 -translate-x-1/2 w-0.5 bg-border;
            height: 2rem; /* space between nodes */
            top: -2rem;
        }
        .workflow-connector.completed {
            @apply bg-green-500;
        }


        .glass-effect {
          @apply bg-card/60 backdrop-blur-xl border border-border/20 shadow-xl shadow-black/10;
        }
        .spotlight {
            pointer-events: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: radial-gradient(circle at var(--x) var(--y), transparent 10%, hsl(var(--background)) 20%);
            z-index: 50;
            opacity: 0.1;
        }
        .animate-text-gradient {
            background-image: linear-gradient(
                -225deg,
                hsl(var(--foreground)) 0%,
                hsl(var(--primary)) 29%,
                hsl(var(--muted-foreground)) 67%,
                hsl(var(--foreground)) 100%
            );
            background-size: 200% auto;
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .dark .animate-text-gradient {
             background-image: linear-gradient(
                -225deg,
                hsl(var(--foreground)) 0%,
                hsl(var(--primary)) 29%,
                hsl(var(--muted-foreground)) 67%,
                hsl(var(--foreground)) 100%
            );
             background-size: 200% auto;
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .mermaid svg {
            max-width: 100%;
            height: auto;
            color: hsl(var(--foreground));
        }
        .mermaid .cluster rect, .mermaid .cluster path {
            fill: hsl(var(--secondary)) !important;
            stroke: hsl(var(--border)) !important;
        }
         .mermaid .node rect, .mermaid .node polygon, .mermaid .node ellipse {
            fill: hsl(var(--card)) !important;
            stroke: hsl(var(--border)) !important;
        }
        .mermaid .node-label {
            color: hsl(var(--card-foreground)) !important;
        }
        .mermaid .edgeLabel {
            background-color: hsl(var(--background)) !important;
            color: hsl(var(--foreground)) !important;
        }
        .mermaid .edge-path {
            stroke: hsl(var(--muted-foreground)) !important;
        }
        .mermaid .arrowhead {
            fill: hsl(var(--muted-foreground)) !important;
        }

        /* Custom Chat Bubbles */
        .chat-bubble {
            @apply p-4 rounded-2xl max-w-[80%];
            position: relative;
        }
        .chat-bubble-user {
            @apply bg-primary text-primary-foreground rounded-br-lg;
        }
        .chat-bubble-ai {
            @apply bg-secondary text-secondary-foreground rounded-bl-lg;
        }
        .chat-bubble-user::after {
            content: '';
            position: absolute;
            right: -10px;
            bottom: 0;
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 10px 0 0 10px;
            border-color: transparent transparent transparent hsl(var(--primary));
        }
        .chat-bubble-ai::after {
            content: '';
            position: absolute;
            left: -10px;
            bottom: 0;
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 10px 10px 0 0;
            border-color: transparent hsl(var(--secondary)) transparent transparent;
        }
         /* General component enhancements */
        .card-interactive {
          @apply transition-all duration-200 ease-in-out;
        }
        .card-interactive:hover {
          @apply shadow-lg transform -translate-y-1 border-primary/20;
        }
        /* Feedback Modal */
        .feedback-modal-overlay {
            @apply fixed inset-0 z-40 bg-background/80 backdrop-blur-sm animate-fade-in;
        }
        .feedback-modal-content {
            @apply fixed z-50 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[90vw] max-w-md animate-fade-in-scale;
        }

        /* Custom Tooltip */
        [data-tooltip] {
            position: relative;
        }
        [data-tooltip]::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%) translateY(4px);
            background-color: hsl(var(--popover));
            color: hsl(var(--popover-foreground));
            padding: 4px 8px;
            border-radius: var(--radius-sm);
            font-size: 12px;
            font-weight: 500;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s, transform 0.2s;
            z-index: 100;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        [data-tooltip]:hover::after {
            opacity: 1;
            transform: translateX(-50%) translateY(-4px);
        }
        /* File Tree */
        .file-tree-node {
            @apply flex items-center py-1.5 px-2 rounded-md cursor-pointer transition-colors;
        }
        .file-tree-node:hover {
            @apply bg-accent/50;
        }
        .chevron-icon {
            @apply transition-transform duration-200;
        }
        .chevron-open {
            transform: rotate(90deg);
        }
        /* React Flow */
        .react-flow .react-flow__node, .react-flow .react-flow__edge {
          transition: opacity 0.2s ease-in-out;
        }
        .react-flow .dimmed {
          opacity: 0.2;
        }
        /* Toast */
        .toast-viewport {
            @apply fixed top-0 z-50 flex flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:flex-col;
        }
        .toast-root {
            @apply w-full max-w-sm p-4 rounded-lg shadow-lg glass-effect;
        }
        .toast-root[data-variant="destructive"] {
             @apply border-destructive/50;
        }
      }
    </style>
    <script type="importmap">
{
  "imports": {
    "react-dom/": "https://esm.sh/react-dom@^19.1.1/",
    "react/": "https://esm.sh/react@^19.1.1/",
    "react": "https://esm.sh/react@^19.1.1",
    "@google/genai": "https://esm.sh/@google/genai@^1.14.0",
    "immer": "https://esm.sh/immer@10.1.1",
    "class-variance-authority": "https://esm.sh/class-variance-authority@0.7.0",
    "clsx": "https://esm.sh/clsx@2.1.1",
    "tailwind-merge": "https://esm.sh/tailwind-merge@2.4.0",
    "potrace": "https://esm.sh/potrace@2.1.8",
    "lodash": "https://esm.sh/lodash@^4.17.21",
    "react-markdown": "https://esm.sh/react-markdown@9.0.1",
    "remark-gfm": "https://esm.sh/remark-gfm@4.0.0",
    "idb-keyval": "https://esm.sh/idb-keyval@6.2.1",
    "uuid": "https://esm.sh/uuid@^11.1.0",
    "framer-motion": "https://esm.sh/framer-motion@^11.3.19",
    "reactflow": "https://esm.sh/reactflow@^11.11.4",
    "elkjs": "https://esm.sh/elkjs@^0.10.0"
  }
}
</script>
</head>
  <body>
    <div id="root"></div>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>
      // Initialize mermaid with themes and disable auto-start
      mermaid.initialize({ 
          startOnLoad: false, 
          theme: 'dark', // Will be overridden by SettingsContext
      });
    </script>
    <script type="module" src="/index.tsx"></script>
  </body>
</html>