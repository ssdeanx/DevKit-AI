<!DOCTYPE html>
<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DevKit AI Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          container: {
            center: true,
            padding: "2rem",
            screens: {
              "2xl": "1400px",
            },
          },
          extend: {
            colors: {
              border: "hsl(var(--border))",
              input: "hsl(var(--input))",
              ring: "hsl(var(--ring))",
              background: "hsl(var(--background))",
              foreground: "hsl(var(--foreground))",
              primary: {
                DEFAULT: "hsl(var(--primary))",
                foreground: "hsl(var(--primary-foreground))",
              },
              secondary: {
                DEFAULT: "hsl(var(--secondary))",
                foreground: "hsl(var(--secondary-foreground))",
              },
              destructive: {
                DEFAULT: "hsl(var(--destructive))",
                foreground: "hsl(var(--destructive-foreground))",
              },
              muted: {
                DEFAULT: "hsl(var(--muted))",
                foreground: "hsl(var(--muted-foreground))",
              },
              accent: {
                DEFAULT: "hsl(var(--accent))",
                foreground: "hsl(var(--accent-foreground))",
              },
              popover: {
                DEFAULT: "hsl(var(--popover))",
                foreground: "hsl(var(--popover-foreground))",
              },
              card: {
                DEFAULT: "hsl(var(--card))",
                foreground: "hsl(var(--card-foreground))",
              },
               success: {
                DEFAULT: "hsl(var(--success))",
                foreground: "hsl(var(--success-foreground))",
               },
               dv: {
                 purple: "hsl(var(--dv-purple))",
                 blue: "hsl(var(--dv-blue))",
                 teal: "hsl(var(--dv-teal))",
                 orange: "hsl(var(--dv-orange))",
                 pink: "hsl(var(--dv-pink))",
               }
            },
            borderRadius: {
              lg: "var(--radius)",
              md: "calc(var(--radius) - 2px)",
              sm: "calc(var(--radius) - 4px)",
            },
            keyframes: {
              "accordion-down": {
                from: { height: "0" },
                to: { height: "var(--radix-accordion-content-height)" },
              },
              "accordion-up": {
                from: { height: "var(--radix-accordion-content-height)" },
                to: { height: "0" },
              },
              "blink": {
                "0%, 100%": { opacity: 1 },
                "50%": { opacity: 0 },
              },
              "fade-in": {
                from: { opacity: '0' },
                to: { opacity: '1' },
              },
               "fade-in-scale": {
                from: { opacity: '0', transform: 'scale(0.95)' },
                to: { opacity: '1', transform: 'scale(1)' },
              },
              "slide-up": {
                from: { transform: 'translateY(10px)' },
                to: { transform: 'translateY(0)' },
              },
               "aurora-bg": {
                '0%': { transform: 'translate(var(--aurora-start-x), var(--aurora-start-y)) scale(1)' },
                '50%': { transform: 'translate(var(--aurora-mid-x), var(--aurora-mid-y)) scale(1.2)' },
                '100%': { transform: 'translate(var(--aurora-end-x), var(--aurora-end-y)) scale(1)' },
               },
               "meteor": {
                '0%': { transform: 'translate(50vw, -50vh) rotate(215deg)', opacity: '1' },
                '70%': { opacity: '1' },
                '100%': { transform: 'translate(-50vw, 50vh) rotate(215deg)', opacity: '0' },
               },
               "text-gradient": {
                  to: { backgroundPosition: "200% center" },
               },
               "pulse-dot": {
                '0%, 100%': { transform: 'scale(1)', opacity: '0.5' },
                '50%': { transform: 'scale(1.2)', opacity: '1' },
               },
               "glow": {
                  '0%': { 'box-shadow': '0 0 5px hsl(var(--primary) / 0.2)' },
                  '50%': { 'box-shadow': '0 0 20px hsl(var(--primary) / 0.5)' },
                  '100%': { 'box-shadow': '0 0 5px hsl(var(--primary) / 0.2)' },
               },
                "fill-width": {
                    from: { width: "0%" },
                    to: { width: "100%" }
                },
                "toast-hide": {
                    "0%": { opacity: "1" },
                    "100%": { opacity: "0" },
                },
                "toast-slide-in-right": {
                    "0%": { transform: `translateX(calc(100% + 1rem))` },
                    "100%": { transform: "translateX(0)" },
                },
                "particle-flow": {
                  "0%": { offsetDistance: "0%" },
                  "100%": { offsetDistance: "100%" },
                },
                "pulse-trace": {
                  "0%": { transform: "scaleX(0)", "transform-origin": "left", opacity: "0.8" },
                  "50%": { transform: "scaleX(1)", "transform-origin": "left", opacity: "1" },
                  "51%": { transform: "scaleX(1)", "transform-origin": "right" },
                  "100%": { transform: "scaleX(0)", "transform-origin": "right", opacity: "0.8" },
                }
            },
            animation: {
              "accordion-down": "accordion-down 0.2s ease-out",
              "accordion-up": "accordion-up 0.2s ease-out",
              "blink": "blink 1s step-end infinite",
              "fade-in": "fade-in 0.3s ease-out forwards",
              "slide-up": "slide-up 0.3s ease-out forwards",
              "aurora-bg": "aurora-bg 60s infinite alternate linear",
              "meteor": "meteor 5s linear infinite",
              "text-gradient": "text-gradient 8s linear infinite",
              "pulse-dot": "pulse-dot 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite",
              "fade-in-scale": "fade-in-scale 0.2s ease-out forwards",
              "glow": "glow 4s ease-in-out infinite",
              "fill-width": "fill-width 0.5s ease-in-out forwards",
              "toast-hide": "toast-hide 100ms ease-in forwards",
              "toast-slide-in-right": "toast-slide-in-right 150ms cubic-bezier(0.16, 1, 0.3, 1)",
              "particle-flow": "particle-flow 2s linear infinite",
              "pulse-trace": "pulse-trace 2s infinite",
            },
          },
        },
      }
    </script>
    <style type="text/tailwindcss">
      @layer base {
        :root {
          /* Light Theme: Grayscale Main with Color Accents */
          --background: 0 0% 100%;
          --foreground: 0 0% 10%;
          --card: 0 0% 98%;
          --card-foreground: 0 0% 10%;
          --popover: 0 0% 100%;
          --popover-foreground: 0 0% 10%;
          --primary: 0 0% 10%; /* Black */
          --primary-foreground: 0 0% 98%; /* White */
          --secondary: 0 0% 94%;
          --secondary-foreground: 0 0% 10%;
          --muted: 0 0% 90%;
          --muted-foreground: 0 0% 45%;
          --accent: 0 0% 94%;
          --accent-foreground: 0 0% 10%;
          --border: 0 0% 89%;
          --input: 0 0% 89%;
          --ring: 0 0% 63%; /* Neutral gray for focus rings */
          --radius: 0.75rem;
          
          /* Status & Data Viz Colors (Purposeful Color) */
          --destructive: 0 84% 60%;
          --destructive-foreground: 0 0% 98%;
          --success: 142 76% 36%;
          --success-foreground: 0 0% 98%;
          --dv-purple: 262 83% 58%;
          --dv-blue: 217 91% 60%;
          --dv-teal: 166 76% 36%;
          --dv-orange: 25 95% 53%;
          --dv-pink: 347 95% 53%;
        }
 
        .dark {
          /* Dark Theme: Grayscale Main with Color Accents */
          --background: 240 10% 3.9%; /* Near Black */
          --foreground: 0 0% 98%; /* White */
          --card: 240 5% 8%;
          --card-foreground: 0 0% 98%;
          --popover: 240 10% 3.9%;
          --popover-foreground: 0 0% 98%;
          --primary: 0 0% 98%; /* White */
          --primary-foreground: 0 0% 9%; /* Black */
          --secondary: 240 4% 12%;
          --secondary-foreground: 0 0% 98%;
          --muted: 240 4% 12%;
          --muted-foreground: 0 0% 63%;
          --accent: 240 4% 12%;
          --accent-foreground: 0 0% 98%;
          --border: 240 4% 15%;
          --input: 240 4% 15%;
          --ring: 0 0% 83%; /* Neutral gray for focus rings */

          /* Status & Data Viz Colors (Purposeful Color) */
          --destructive: 0 72% 51%;
          --destructive-foreground: 0 0% 98%;
          --success: 142 70% 40%;
          --success-foreground: 0 0% 9%;
          --dv-purple: 262 83% 68%;
          --dv-blue: 217 91% 70%;
          --dv-teal: 166 76% 46%;
          --dv-orange: 25 95% 63%;
          --dv-pink: 347 95% 63%;
        }
      }
       @layer base {
        * {
          @apply border-border;
        }
        body {
          @apply bg-background text-foreground;
          font-family: Inter, system-ui, Avenir, Helvetica, Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }
        .background-noise {
          background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 800"><filter id="noiseFilter"><feTurbulence type="fractalNoise" baseFrequency="0.65" numOctaves="3" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23noiseFilter)"/></svg>');
          opacity: 0.02;
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          pointer-events: none;
        }
      }
      @layer components {
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: hsl(var(--secondary) / 0.5);
            border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: hsl(var(--muted-foreground));
            border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: hsl(var(--foreground));
        }

        .view-header {
            @apply p-6 relative;
        }
        .view-header::after {
            content: '';
            @apply absolute bottom-0 left-0 w-full h-px;
            background: linear-gradient(90deg, transparent 0%, hsl(var(--border)) 50%, transparent 100%);
        }

        .glass-effect {
          @apply bg-card/60 backdrop-blur-xl border border-border/20;
        }
        
        .card-glow-border {
            @apply bg-card border border-border/50 rounded-lg relative transition-all duration-300;
        }
        .card-glow-border::before {
            content: '';
            @apply absolute -inset-px rounded-lg pointer-events-none;
            background: radial-gradient(400px at var(--x, 0px) var(--y, 0px), hsl(var(--primary) / 0.1), transparent 80%);
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }
        .card-glow-border:hover::before {
            opacity: 1;
        }
        
        .bento-grid {
            @apply grid grid-cols-4 auto-rows-[120px] gap-4;
        }
        .bento-item {
            @apply relative flex flex-col justify-between p-4 rounded-lg overflow-hidden transition-all duration-300 card-glow-border cursor-pointer;
        }
        .bento-item h3 {
            @apply font-bold text-card-foreground text-base relative z-10;
        }
        .bento-item p {
            @apply text-xs text-muted-foreground relative z-10;
        }
        .bento-item .bento-icon {
            @apply absolute bottom-2 right-2 z-0 text-foreground/5 transition-transform duration-300;
        }
        .bento-item:hover .bento-icon {
            transform: scale(1.2) rotate(-10deg);
        }
        .bento-item:nth-child(1) { @apply col-span-2; }
        .bento-item:nth-child(2) { @apply col-span-2; }
        .bento-item:nth-child(3) { @apply col-span-4; }

        .chat-bubble {
            @apply p-3 rounded-xl max-w-[80%] relative;
        }
        .chat-bubble-user {
            @apply bg-primary text-primary-foreground rounded-br-none;
        }
        .chat-bubble-ai {
            @apply bg-secondary text-secondary-foreground rounded-bl-none;
        }
        
        .mermaid svg {
            max-width: 100%;
            height: auto;
        }
        
        .toast-viewport {
            @apply fixed top-0 z-[100] flex flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col;
        }
        .toast-root {
            @apply w-full max-w-sm p-4 rounded-lg shadow-lg glass-effect;
        }
        .toast-root[data-variant="destructive"] {
             @apply border-destructive/50 bg-destructive/10;
        }
        .toast-root[data-variant="default"] {
             @apply border-success/50 bg-success/10;
        }
        
        .canvas-background {
            background-image: linear-gradient(hsl(var(--border) / 0.3) 1px, transparent 1px), linear-gradient(to right, hsl(var(--border) / 0.3) 1px, transparent 1px);
            background-size: 24px 24px;
            background-color: hsl(var(--secondary) / 0.3);
            border-radius: var(--radius);
        }

        .aurora-canvas {
            position: relative;
            overflow: hidden;
        }
        .aurora-canvas::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 200%;
            height: 200%;
            --aurora-start-x: -50%;
            --aurora-start-y: -50%;
            --aurora-mid-x: 50%;
            --aurora-mid-y: 150%;
            --aurora-end-x: -50%;
            --aurora-end-y: -50%;
            background: radial-gradient(ellipse at center, hsl(var(--dv-purple) / 0.1), transparent 40%),
                        radial-gradient(ellipse at center, hsl(var(--dv-blue) / 0.1), transparent 40%);
            animation: aurora-bg 80s infinite alternate linear;
            z-index: 0;
            pointer-events: none;
        }
        .react-flow__node, .react-flow__edge {
            transition: opacity 0.3s ease, filter 0.3s ease;
        }
        .react-flow__node.dimmed, .react-flow__edge.dimmed {
            opacity: 0.15;
            filter: grayscale(1);
        }

        .typing-cursor::after {
            content: '▋';
            @apply ml-1 animate-blink;
        }

        /* Agent Thought Styles */
        .thoughts-terminal { @apply bg-black font-mono text-[#C9D1D9]; }
        .thoughts-blueprint {
            @apply bg-[#0a2a54] font-mono text-[#a2c6ff];
            background-image:
                linear-gradient(rgba(162,198,255,0.2) 1px, transparent 1px),
                linear-gradient(to right, rgba(162,198,255,0.2) 1px, transparent 1px);
            background-size: 20px 20px;
        }
        .thoughts-handwritten { @apply bg-[#fdfaf2] text-[#3a352f] dark:bg-[#3a352f] dark:text-[#fdfaf2] italic; font-family: 'Georgia', serif; }
        .thoughts-code-comment { @apply bg-transparent; }
        .thoughts-code-comment-content::before { content: '/*'; @apply mr-2 opacity-50; }
        .thoughts-code-comment-content::after { content: '*/'; @apply ml-2 opacity-50; }
        .thoughts-matrix { @apply bg-black font-mono text-green-400; text-shadow: 0 0 5px rgba(50, 255, 50, 0.7); }
        .thoughts-scroll { @apply bg-[#e7d8c5] dark:bg-[#5C4033] text-[#5C4033] dark:text-[#d4c3b4]; font-family: 'Georgia', serif; border: 2px solid #c9b7a2; box-shadow: 2px 2px 8px rgba(0,0,0,0.2); }
        .thoughts-notebook {
            @apply bg-white text-black dark:bg-[#222] dark:text-white;
            background-image:
              linear-gradient(to bottom, transparent 95%, hsl(var(--dv-blue)/0.4) 95%),
              linear-gradient(to right, transparent 50px, hsl(var(--dv-pink)/0.4) 50px, hsl(var(--dv-pink)/0.4) 51px, transparent 51px);
            background-size: 100% 20px, 100% 100%;
            line-height: 20px;
        }
        .thoughts-gradient-glow {
            @apply bg-gray-900;
            background-image: linear-gradient(125deg, hsl(var(--dv-purple)), hsl(var(--dv-pink)), hsl(var(--dv-blue)));
            background-size: 200% 200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: text-gradient 8s linear infinite;
        }
        .thoughts-scientific-journal { @apply bg-[#faf8f2] text-[#444] dark:bg-[#1a1d2c] dark:text-[#ccc]; font-family: 'Times New Roman', Times, serif; }
        .thoughts-redacted { @apply bg-black text-white font-mono uppercase; }
        .thoughts-redacted .redacted-text { @apply bg-white text-white; }
        
        /* Workflow Visualizer Styles */
        .workflow-step { @apply flex items-start p-3 rounded-lg transition-all duration-300; }
        .workflow-step.in-progress { @apply bg-primary/10; }
        .workflow-step.completed { @apply opacity-80; }
        .workflow-step-clickable { @apply cursor-pointer hover:bg-primary/5; }
        .workflow-output-preview { @apply mt-2 p-2 bg-background/50 rounded-md border text-xs; }
        .workflow-timeline-item { @apply relative pl-10; }
        .workflow-timeline-item::before { @apply content-[''] absolute left-4 top-5 w-0.5 h-full bg-border; }
        .workflow-timeline-item:last-child::before { @apply h-0; }
        .workflow-timeline-status { @apply absolute left-0 top-1.5 w-9 h-9 rounded-full flex items-center justify-center border-4; }
        .workflow-timeline-status.pending { @apply bg-secondary border-secondary; }
        .workflow-timeline-status.in-progress { @apply bg-primary/10 border-primary/50; }
        .workflow-timeline-status.completed { @apply bg-success/10 border-success/50; }

        .workflow-stepper { @apply flex items-center; }
        .workflow-stepper-item { @apply flex-1 flex items-center relative; }
        .workflow-stepper-connector { @apply flex-1 h-0.5 mx-4 bg-border relative overflow-hidden; }
        .workflow-stepper-connector-fill { @apply absolute top-0 left-0 h-full bg-success; }
        .workflow-stepper-status { @apply w-8 h-8 rounded-full flex items-center justify-center border-2 transition-colors duration-300; }
        .workflow-stepper-status.pending { @apply bg-secondary border-border text-muted-foreground; }
        .workflow-stepper-status.in-progress { @apply bg-primary/10 border-primary text-primary animate-pulse; }
        .workflow-stepper-status.completed { @apply bg-success/10 border-success text-success; }

        .workflow-log { @apply bg-black font-mono text-sm text-gray-300 p-4 rounded-lg; }
        .workflow-log-line { @apply flex items-center justify-between; }
        .workflow-log-line .status-completed { @apply text-green-400; }
        .workflow-log-line .status-in-progress { @apply text-blue-400; }
        .workflow-log-line .status-pending { @apply text-gray-500; }

        /* Advanced Workflow Visualizer Styles */
        .nn-node {
          box-shadow: 0 0 0 2px hsl(var(--border)), 0 0 10px hsl(var(--border) / 0.5);
        }
        .nn-node.in-progress {
          animation: glow 2s ease-in-out infinite;
        }
        .particle {
          offset-path: path(var(--path));
          animation: particle-flow var(--duration) linear infinite;
        }
        .git-branch-line {
          position: absolute;
          left: 1.25rem;
          top: 1.25rem;
          bottom: 1.25rem;
          width: 2px;
          background-color: hsl(var(--border));
        }
        .git-commit-node {
          position: absolute;
          left: 0.75rem;
          width: 1.5rem;
          height: 1.5rem;
          border-radius: 9999px;
          border: 2px solid hsl(var(--border));
          background-color: hsl(var(--background));
        }
        .circuit-board-container { @apply flex items-center p-6 bg-black/20 rounded-lg overflow-x-auto custom-scrollbar min-h-[160px]; }
        .circuit-chip { @apply relative flex-shrink-0 w-44 h-28 bg-card border-2 rounded-lg p-3 flex flex-col justify-between transition-all duration-300; }
        .circuit-chip.in-progress { @apply border-primary shadow-lg animate-glow; }
        .circuit-chip.completed { @apply border-success bg-success/5; }
        .circuit-chip.pending { @apply border-border opacity-50; }
        .circuit-trace-container { @apply flex-shrink-0 w-12 h-20 flex items-center; }
        .circuit-trace { @apply w-full h-1 bg-border rounded-full relative overflow-hidden; }
        .circuit-trace.completed { @apply bg-success/20; }
        .circuit-trace-fill { @apply h-full bg-success absolute top-0 left-0; }
        .circuit-trace-pulse { @apply absolute top-0 left-0 h-full w-full bg-primary animate-pulse-trace; }

        /* Tooltip Styles */
        [data-tooltip] {
          position: relative;
          cursor: pointer;
        }
        [data-tooltip]:hover::before,
        [data-tooltip]:hover::after {
          opacity: 1;
          transform: translate(-50%, 0);
          pointer-events: auto;
          transition: opacity 0.2s ease-in-out 0.1s;
        }
        [data-tooltip]::before {
          content: '';
          position: absolute;
          bottom: calc(100% + 2px);
          left: 50%;
          transform: translate(-50%, 8px);
          width: 0;
          height: 0;
          border-left: 6px solid transparent;
          border-right: 6px solid transparent;
          border-top: 6px solid hsl(var(--popover));
          z-index: 101;
          opacity: 0;
          pointer-events: none;
          filter: drop-shadow(0 -1px 2px hsl(var(--background) / 0.1));
        }
        [data-tooltip]::after {
          content: attr(data-tooltip);
          position: absolute;
          bottom: calc(100% + 8px);
          left: 50%;
          transform: translate(-50%, 8px);
          background: hsl(var(--popover));
          color: hsl(var(--popover-foreground));
          border: 1px solid hsl(var(--border));
          padding: 0.5rem 0.75rem;
          border-radius: var(--radius-md);
          font-size: 0.75rem;
          line-height: 1.4;
          white-space: pre-wrap;
          z-index: 100;
          opacity: 0;
          pointer-events: none;
          width: max-content;
          max-width: 250px;
          box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
      }
    </style>
    <script type="importmap">
{
  "imports": {
    "react-dom/": "https://esm.sh/react-dom@^19.1.1/",
    "react/": "https://esm.sh/react@^19.1.1/",
    "react": "https://esm.sh/react@^19.1.1",
    "@google/genai": "https://esm.sh/@google/genai@^1.14.0",
    "immer": "https://esm.sh/immer@10.1.1",
    "class-variance-authority": "https://esm.sh/class-variance-authority@0.7.0",
    "clsx": "https://esm.sh/clsx@2.1.1",
    "tailwind-merge": "https://esm.sh/tailwind-merge@2.4.0",
    "potrace": "https://esm.sh/potrace@2.1.8",
    "lodash": "https://esm.sh/lodash@^4.17.21",
    "react-markdown": "https://esm.sh/react-markdown@9.0.1",
    "remark-gfm": "https://esm.sh/remark-gfm@4.0.0",
    "idb-keyval": "https://esm.sh/idb-keyval@6.2.1",
    "uuid": "https://esm.sh/uuid@^11.1.0",
    "framer-motion": "https://esm.sh/framer-motion@^11.3.19",
    "reactflow": "https://esm.sh/reactflow@^11.11.4",
    "d3-force": "https://esm.sh/d3-force@^3.0.0",
    "exponential-backoff": "https://esm.sh/exponential-backoff@^3.1.2",
    "from": "https://esm.sh/from@^0.1.7"
  }
}
</script>
</head>
  <body>
    <div id="root"></div>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>
      // Initialize mermaid with themes and disable auto-start
      mermaid.initialize({ 
          startOnLoad: false, 
          theme: 'dark', // Will be overridden by SettingsContext
      });
    </script>
    <script type="module" src="/index.tsx"></script>
  </body>
</html>